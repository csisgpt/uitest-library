.segment {
  --segment-color: var(--color-primary);
  --segment-color-on: var(--color-on-primary);
  position: relative;
  display: inline-flex;
  align-items: stretch;
  background: var(--color-surface);
  border-radius: var(--radius-full);
  overflow: hidden;
}

.fullWidth {
  width: 100%;
}

.scrollable {
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
}

.scrollable::before,
.scrollable::after {
  content: '';
  position: sticky;
  top: 0;
  bottom: 0;
  width: var(--space-md);
  pointer-events: none;
  z-index: 1;
}

.scrollable::before {
  left: 0;
  background: linear-gradient(to right, var(--color-surface), transparent);
}

.scrollable::after {
  right: 0;
  background: linear-gradient(to left, var(--color-surface), transparent);
}

:global(html[dir='rtl']) .scrollable::before {
  right: 0;
  left: auto;
  background: linear-gradient(to left, var(--color-surface), transparent);
}

:global(html[dir='rtl']) .scrollable::after {
  left: 0;
  right: auto;
  background: linear-gradient(to right, var(--color-surface), transparent);
}

.indicator {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  background: var(--segment-color);
  transition: transform var(--transition-base), width var(--transition-base);
  will-change: transform, width;
  box-shadow: var(--shadow-sm);
  border-radius: var(--radius-full);
}

.mode_md .indicator {
  height: 2px;
  top: auto;
  bottom: 0;
  border-radius: 0;
  box-shadow: none;
}

.disabled {
  opacity: 0.5;
  pointer-events: none;
}

.readonly {
  opacity: 0.8;
  pointer-events: none;
}

.multiple .indicator {
  display: none;
}

.sm {
  --segment-height: calc(var(--space-md) * 2);
}

.md {
  --segment-height: calc(var(--space-lg) * 2);
}

.lg {
  --segment-height: calc(var(--space-lg) * 2.5);
}

.pill {
  border-radius: var(--radius-full);
}

.rounded {
  border-radius: var(--radius-md);
}

.variant_primary {
  --segment-color: var(--color-primary);
  --segment-color-on: var(--color-on-primary);
}

.variant_secondary {
  --segment-color: var(--color-secondary);
  --segment-color-on: var(--color-on-secondary);
}

.variant_success {
  --segment-color: var(--color-success);
  --segment-color-on: var(--color-on-success);
}

.variant_warning {
  --segment-color: var(--color-warning);
  --segment-color-on: var(--color-on-warning);
}

.variant_info {
  --segment-color: var(--color-info);
  --segment-color-on: var(--color-on-info);
}

.variant_error {
  --segment-color: var(--color-error);
  --segment-color-on: var(--color-on-error);
}

.variant_outline {
  --segment-color: var(--color-border);
  --segment-color-on: var(--color-text);
}

.variant_ghost {
  --segment-color: var(--color-text);
  --segment-color-on: var(--color-text);
}

.mode_ios {
  background: var(--color-surface);
  box-shadow: var(--shadow-sm);
}

.mode_md {
  background: transparent;
}

.mode_md.segment::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 1px;
  background: var(--color-border);
  opacity: 0.4;
  pointer-events: none;
}

@media (prefers-reduced-motion: reduce) {
  .indicator {
    transition: none;
  }
}
