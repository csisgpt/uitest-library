/* BaseSegment.module.css */

.segment {
  display: inline-block;
  position: relative;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  padding: var(--space-xs);
  font-family: var(--font-family-base);
  user-select: none;
  -webkit-user-select: none;
  box-shadow: var(--shadow-sm);
  transition: all var(--transition-fast);
}

.segment:focus-within {
  box-shadow: 0 0 0 var(--focus-ring-width) var(--focus-ring-color);
}

.segmentContainer {
  display: flex;
  position: relative;
  align-items: stretch;
  width: 100%;
}

/* Segment Indicator (Active Background) */
.segmentIndicator {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  background: var(--segment-bg, var(--color-primary));
  border-radius: calc(var(--radius-lg) - var(--space-xs));
  transition: all var(--transition-base);
  z-index: 1;
  box-shadow: var(--shadow-sm);
}

/* Segment Button */
.segmentButton {
  position: relative;
  z-index: 2;
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-sm);
  padding: var(--space-md) var(--space-lg);
  border: none;
  background: transparent;
  color: var(--color-text);
  font-family: inherit;
  font-size: var(--segment-font-size, var(--font-size-md));
  font-weight: var(--font-weight-medium);
  border-radius: calc(var(--radius-lg) - var(--space-xs));
  cursor: pointer;
  transition: all var(--transition-fast);
  white-space: nowrap;
  min-height: 40px;
  outline: none;
}

.segmentButton:focus-visible {
  outline: 2px solid var(--focus-ring-color);
  outline-offset: 2px;
}

.segmentButton:hover:not(:disabled) {
  background-color: var(--hover-overlay);
}

.segmentButton:active:not(:disabled) {
  background-color: var(--active-overlay);
  transform: scale(0.98);
}

/* Selected State */
.segmentButton--selected {
  color: var(--segment-selected-color, var(--color-on-primary));
}

/* Disabled State */
.segmentButton--disabled {
  opacity: var(--opacity-disabled);
  cursor: not-allowed;
  pointer-events: none;
}

.segment--disabled {
  opacity: var(--opacity-disabled);
  pointer-events: none;
}

/* Icon and Text */
.segmentButtonIcon {
  font-size: 1.125em;
  flex-shrink: 0;
}

.segmentButtonText {
  flex: 1;
  text-align: center;
}

/* Colors */
.segment--primary {
  --segment-bg: var(--color-primary);
  --segment-selected-color: var(--color-on-primary);
}

.segment--secondary {
  --segment-bg: var(--color-secondary);
  --segment-selected-color: var(--color-on-secondary);
}

.segment--success {
  --segment-bg: var(--color-success);
  --segment-selected-color: var(--color-on-success);
}

.segment--warning {
  --segment-bg: var(--color-warning);
  --segment-selected-color: var(--color-on-warning);
}

.segment--danger {
  --segment-bg: var(--color-error);
  --segment-selected-color: var(--color-on-error);
}

.segment--info {
  --segment-bg: var(--color-info);
  --segment-selected-color: var(--color-on-info);
}

.segment--dark {
  --segment-bg: var(--color-text);
  --segment-selected-color: var(--color-background);
}

.segment--light {
  --segment-bg: var(--color-background);
  --segment-selected-color: var(--color-text);
  border-color: var(--color-text);
}

/* Sizes */
.segment--small {
  padding: calc(var(--space-xs) / 2);
  --segment-font-size: var(--font-size-sm);
}

.segment--small .segmentButton {
  padding: var(--space-sm) var(--space-md);
  min-height: 32px;
}

.segment--large {
  padding: var(--space-sm);
  --segment-font-size: var(--font-size-lg);
}

.segment--large .segmentButton {
  padding: var(--space-lg) var(--space-xl);
  min-height: 48px;
}

/* Scrollable */
.segment--scrollable {
  overflow: hidden;
}

.segment--scrollable .segmentContainer {
  overflow-x: auto;
  overflow-y: hidden;
  scrollbar-width: none;
  -ms-overflow-style: none;
  scroll-behavior: smooth;
}

.segment--scrollable .segmentContainer::-webkit-scrollbar {
  display: none;
}

.segment--scrollable .segmentButton {
  flex: 0 0 auto;
  min-width: fit-content;
}

.segment--scrollable .segmentIndicator {
  display: none;
}

.segment--scrollable .segmentButton--selected {
  background: var(--segment-bg, var(--color-primary));
  color: var(--segment-selected-color, var(--color-on-primary));
  box-shadow: var(--shadow-sm);
}

/* Swipe Gesture */
.segment--swipe-gesture {
  touch-action: pan-y;
}

/* Animation Classes */
.segmentButton {
  animation: var(--segment-enter-animation, none);
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.segment[data-animation="slide"] .segmentButton {
  animation: slideIn 0.3s ease-out;
}

.segment[data-animation="slide"] .segmentButton:nth-child(2) { animation-delay: 0.05s; }
.segment[data-animation="slide"] .segmentButton:nth-child(3) { animation-delay: 0.1s; }
.segment[data-animation="slide"] .segmentButton:nth-child(4) { animation-delay: 0.15s; }
.segment[data-animation="slide"] .segmentButton:nth-child(5) { animation-delay: 0.2s; }

/* RTL Support */
[dir="rtl"] .segment {
  direction: rtl;
}

[dir="rtl"] .segmentContainer {
  flex-direction: row-reverse;
}

/* Mobile Optimizations */
@media (max-width: 768px) {
  .segment {
    width: 100%;
  }
  
  .segmentButton {
    min-width: 0;
    padding: var(--space-md) var(--space-sm);
  }
  
  .segment--large .segmentButton {
    padding: var(--space-lg) var(--space-md);
  }
  
  .segmentButtonText {
    font-size: 0.9em;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .segment {
    border-width: 2px;
  }
  
  .segmentIndicator {
    border: 2px solid var(--color-text);
  }
  
  .segmentButton--selected {
    text-decoration: underline;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .segmentIndicator {
    transition: none;
  }
  
  .segmentButton {
    transition: none;
    animation: none;
  }
}

/* Print styles */
@media print {
  .segment {
    background: white;
    border: 1px solid black;
  }
  
  .segmentIndicator {
    display: none;
  }
  
  .segmentButton--selected {
    background: black;
    color: white;
  }
}