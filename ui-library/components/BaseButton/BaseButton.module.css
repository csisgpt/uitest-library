/* -------- Root & Trigger -------- */
.root {
  position: relative;
  display: inline-block;
}

.trigger {
  cursor: pointer;
  background: var(--color-surface, #fff);
  color: var(--color-text, #111);
  border: 1px solid var(--color-border, #e5e7eb);
  border-radius: var(--radius-md, 8px);
  padding: 8px 12px;
  transition: transform .16s ease, box-shadow .16s ease;
}
.trigger:focus-visible {
  outline: var(--focus-ring-width, 2px) solid var(--focus-ring-color, #2684ff);
  outline-offset: var(--focus-ring-offset, 2px);
}
.triggerScaled { transform: scale(0.98); }

/* -------- Backdrop -------- */
.backdrop {
  position: fixed;
  inset: 0;
  z-index: var(--z-index-overlay, 1000);
}
.backdrop--transparent { background: transparent; }
.backdrop--opaque { background: rgba(0,0,0,.4); }
.backdrop--blur { background: rgba(0,0,0,.25); backdrop-filter: blur(4px); }

/* -------- Content (Popover panel) -------- */
.content {
  position: absolute; /* strategy via inline styles */
  z-index: var(--z-index-dropdown, 1100);
  min-width: 200px;
  max-width: min(90vw, 360px);
  padding: var(--popover-padding, 12px);

  /* پایه‌ی خنثی */
  --accent: var(--color-text, #111);  /* مقدار پیشفرض */
  --accent-on: #fff;

  background: var(--popover-bg, var(--color-surface, #fff));
  color: var(--popover-fg, var(--color-text, #111));
  border: 1px solid var(--popover-border, var(--color-border, #e5e7eb));
  border-radius: var(--popover-radius, var(--radius-lg, 12px));
  box-shadow: var(--popover-shadow, var(--shadow-lg, 0 12px 28px rgba(0,0,0,.14)));
}
.content:focus-visible { outline: none; }

/* Sizes */
.content[data-size="sm"] { --popover-padding: 8px; font-size: 0.92rem; }
.content[data-size="md"] { --popover-padding: 12px; font-size: 1rem; }
.content[data-size="lg"] { --popover-padding: 16px; font-size: 1.06rem; }

/* Radius */
.content[data-radius="none"] { --popover-radius: 0; }
.content[data-radius="sm"]   { --popover-radius: var(--radius-sm, 6px); }
.content[data-radius="md"]   { --popover-radius: var(--radius-md, 8px); }
.content[data-radius="lg"]   { --popover-radius: var(--radius-lg, 12px); }
.content[data-radius="full"] { --popover-radius: 9999px; }

/* Shadow */
.content[data-shadow="none"] { --popover-shadow: none; }
.content[data-shadow="sm"]   { --popover-shadow: var(--shadow-sm, 0 4px 14px rgba(0,0,0,.08)); }
.content[data-shadow="md"]   { --popover-shadow: var(--shadow-md, 0 8px 20px rgba(0,0,0,.10)); }
.content[data-shadow="lg"]   { --popover-shadow: var(--shadow-lg, 0 12px 28px rgba(0,0,0,.14)); }

/* ✨ رنگ‌ها با تینت و سایه‌ی هماهنگ (HeroUI-like) */
.content[data-color="default"] { /* همون پایه */ }

.content[data-color="primary"]   { --accent: var(--color-primary, #1e8759);   --accent-on: var(--color-on-primary, #fff); }
.content[data-color="secondary"] { --accent: var(--color-secondary, #35495e); --accent-on: var(--color-on-secondary, #fff); }
.content[data-color="success"]   { --accent: var(--color-success, #22c55e);   --accent-on: var(--color-on-success, #fff); }
.content[data-color="warning"]   { --accent: var(--color-warning, #f59e0b);   --accent-on: var(--color-on-warning, #111); }
.content[data-color="danger"]    { --accent: var(--color-error, #ef4444);     --accent-on: var(--color-on-error, #fff); }
.content[data-color="foreground"]{ --accent: var(--color-text, #111);         --accent-on: var(--color-surface, #fff); }

/* لبه و سایه براساس accent */
.content[data-color]:not([data-color="default"]) {
  /* ring نازک داخلی + سایه گرم هم‌رنگ accent */
  --_ring: color-mix(in srgb, var(--accent), white 72%);
  --_shadow: color-mix(in srgb, var(--accent), transparent 82%);
  border-color: var(--_ring);
  box-shadow:
    0 12px 28px var(--_shadow),
    0 0 0 1px var(--_ring) inset,
    var(--popover-shadow);
  /* های‌لایت خیلی ملایم */
  background:
    radial-gradient(120% 80% at 50% -20%, color-mix(in srgb, var(--accent), white 94%) 0%, transparent 60%) ,
    var(--popover-bg, #fff);
}

/* فوکوس‌ویزیبل */
.content[data-focus-visible] {
  outline: var(--focus-ring-width, 2px) solid var(--focus-ring-color, #2684ff);
  outline-offset: 2px;
}

/* -------- Arrow -------- */
.arrow {
  --popover-arrow-size: 10px;
  position: absolute;
  width: var(--popover-arrow-size);
  height: var(--popover-arrow-size);
  background: var(--popover-bg, #fff);
  border: 1px solid var(--popover-border, var(--color-border, #e5e7eb));
  transform: rotate(45deg);
  box-shadow: var(--shadow-sm, 0 4px 12px rgba(0,0,0,.08));
}
